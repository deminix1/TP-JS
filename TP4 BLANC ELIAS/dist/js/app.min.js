class Article{id;title;description;constructor(t,e,i){this.id=t,this.title=e,this.description=i}createArticleHtml(){let t=$("<article></article>"),e=$("<h3></h3>"),i=$("<p></p>"),l=$("<button></button>"),n=$("#newsVue");e.html(this.title),i.html(this.description),l.html("View detail"),this.bindButtonViewdetail(l,viewdetailClick),e.addClass("title"),t.attr("id",this.id),t.append(e),t.append(i),t.append(l),n.append(t)}checkArticleUnicity(){var e=$(".title");for(let t=0;t<e.length;t++)if($(e[t]).html().toLowerCase().trim()===this.title.toLowerCase().trim())throw new Error("Erreur article deja existant")}checkValue(){if(""===this.title)throw new Error("Title vide");if(""===this.description)throw new Error("Description vide")}addArticle(){clearErrors();try{this.checkValue(),this.checkArticleUnicity()}catch(t){return addError(t.message,$("#addNewsForm")),!1}return this.createArticleHtml(),!0}bindButtonViewdetail(t,e){t.click(e)}static getNextId(){let t=$("article:last");return 0==t.length?1:t.attr("id")+1}}const ROUGE="#FF0000",BLEU="#0000FF",VERT="#008000",ALLNEWSJSON=`[
						{"id": "1", "title": "News 1", "description": "Ma super news 1"},
						{"id": "2", "title": "News 2", "description": "Ma super news 2"},
						{"id": "3", "title": "News 3", "description": "Ma super news 3"}
					]`;function bindButton(t){t.click(function(t){t.preventDefault();let e=$('input[name="titleToAdd"]'),i=$('textarea[name="descriptionToAdd"]'),l=new Article(Article.getNextId(),e.val(),i.val());return l.addArticle()&&(e.val(""),i.val("")),!1})}function clearErrors(){$(".error").remove()}function addError(t,e){let i=$("<p></p>");i.html(t),i.css("color",ROUGE),i.addClass("error"),e.prepend(i)}function viewdetailClick(){let t=$(this).parent().find("p");logMessageWithDate(t.html())}function switchTab(){$(".onglet").hide(),$($(this).data("target")).show()}function logMessageWithDate(t){let e=new Date;console.log(e.toLocaleString()+" : "+t)}iterate();let h1=$("h1");logMessageWithDate(h1.html());let titleNews=$("#titleNews");logMessageWithDate(titleNews.html());let titles=$(".title");titles.each(function(){logMessageWithDate($(this).html())});let button=$('input[name="addNewsBtn"]');bindButton(button);let buttons=$("article button");buttons.each(function(){$(this).click(viewdetailClick)});let tabs=$(".tab");function iterate(){for(let t=0;t<5;t++)logMessageWithDate(t),0===t?logMessageWithDate(VERT):t%2==0?logMessageWithDate(ROUGE):logMessageWithDate(BLEU)}tabs.each(function(){$(this).click(switchTab)}),$.ajax({url:"https://newsapi.org/v2/top-headlines?country=fr&apiKey=9b4e42c6404c48cab0f04cb200654d6c",method:"GET",dataType:"jsonp",cors:!0,contentType:"application/json",secure:!0,headers:{"Access-Control-Allow-Origin":"*"},beforeSend:function(t){t.setRequestHeader("Authorization","Basic "+btoa(""))},success:function(t){console.log(t)}}).done(function(t,e,i){300<=i.status&&i.status<400&&console.log("Attention redirection"),console.log(t),t.articles.forEach(e=>function(){let t=new Article(Article.getNextId(),e.title,e.description);t.addArticle()})}).fail(function(t,e,i){console.log(t.status)});const newsTemplate=`<article>
			              <h3  class="title" :style="isClicked ? { 'color': 'green'} : {'color': 'red'}">{{ article.title }}</h3>
                          <p>{{ article.description }}</p>
			              <button @click="changerTitre(article.description)">View detail</button>
		              </article>`,newsComponent={props:["article"],data:function(){return{isClicked:!1}},template:newsTemplate,methods:{changerTitre:function(t){this.isClicked=!this.isClicked,console.log(t)}}},Counter={data(){var t=JSON.parse(ALLNEWSJSON),e=t.length;let i=1<e?"articles":"article";return{counter:e,title:i,articles:t}}};Vue.createApp(Counter).component("news-item",newsComponent).mount("#newsVue");